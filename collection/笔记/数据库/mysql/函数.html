<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>函数</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <link rel="stylesheet" type="text/css" href="/collection/css/Syntaxhighlighter/shCoreMDUltra.css"/>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside></aside>
<article>
    <header>
        <h1>函数</h1>
        <div id="info">
            <div id="time">2019-06-24</div>
            <div id="author">作者：<span><a href="javascript:myAlert();">loubth</a></span></div>
        </div>
    </header>
    <div class="content doc">
        <p>在mysql中，函数分为两类：系统函数（内置函数）和自定义函数</p>
        <p>不管是内置函数还是用户自定义函数，都是使用<strong>select 函数名(参数列表);</strong></p>

        <h2>内置函数</h2>
        <h3>字符串函数</h3>
        <ul>
            <li>char_length()：判断字符串的字符数
                <div id="highlighter_623644" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;char_length('你好中国');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;char_length('你好中国')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>length()：判断字符串的字节数（与字符集）
                <div id="highlighter_875650" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;length('你好中国');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;length('你好中国')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
                <p>使用的是UTF-8字符集，一个中文占3个字节，所以共占4*3=12个</p>
            </li>
            <li>concat()：连接字符串
                <div id="highlighter_246701" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;concat('123','sss','@@@');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;concat('123','sss','@@@')&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;123sss@@@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>instr()：判断字符在目标字符串中是否存在,存在返回其位置（下标从1开始）,不存在返回0
                <div id="highlighter_658490" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;instr('你好中国','中'),instr('你好中国','好中'),instr('你好中国','滚'),instr('你好中国','你滚');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-----------------------------+--------------------------------+-----------------------------+--------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;instr('你好中国','中')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;instr('你好中国','好中')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;instr('你好中国','滚')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;instr('你好中国','你滚')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-----------------------------+--------------------------------+-----------------------------+--------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-----------------------------+--------------------------------+-----------------------------+--------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.03&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>lcase()：全部小写
                <div id="highlighter_831576" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;lcase('rEd&nbsp;Alert&nbsp;nUMber&nbsp;3');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;lcase('rEd&nbsp;Alert&nbsp;nUMber&nbsp;3')&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;red&nbsp;alert&nbsp;number&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-----------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>left()：从左侧开始截取字符串直到指定位置
                <div id="highlighter_482475" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;left('社会人干社会事',6);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;left('社会人干社会事',6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;社会人干社会&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>ltrim()：消除左边对应的空格
                <div id="highlighter_229457" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;ltrim('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;社会人&nbsp;撞&nbsp;&nbsp;&nbsp;&nbsp;社会车&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------------------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;ltrim('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;社会人&nbsp;撞&nbsp;&nbsp;&nbsp;&nbsp;社会车&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------------------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;社会人&nbsp;撞&nbsp;&nbsp;&nbsp;&nbsp;社会车&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------------------------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>mid()：从中间指定位置开始截取,如果不指定截取长度,直接到最后
                <div id="highlighter_259433" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;mid('社会人怂社会包',4);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+--------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;mid('社会人怂社会包',4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+--------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;怂社会包&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+--------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ul>

        <h3>时间函数</h3>

        <ul>
            <li>now()：返回当前时间，日期时间
                <div id="highlighter_13131" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;now();</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;now()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;2019-06-24&nbsp;10:08:22&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>curdate()：返回当前日期
                <div id="highlighter_503521" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;curdate();</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;curdate()&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;2019-06-24&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>curtime()：返回当前时间
                <div id="highlighter_457631" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;curtime();</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-----------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;curtime()&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-----------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;10:11:02&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-----------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>datediff()：判断两个日期之间的天数差距，参数日期必须使用字符串格式(用引号)
                <div id="highlighter_328012" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;datediff('2019-06-24','1997-10-30');</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;datediff('2019-06-24','1997-10-30')&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7907&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-------------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>date_add(日期,interval 时间数字 type)：进行时间的增加
                <div id="highlighter_997917" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;date_add('2000-10-10',interval&nbsp;10&nbsp;second),date_add('2000-10-10',interval&nbsp;10&nbsp;minute),date_add('2000-10-10',interval&nbsp;10&nbsp;month),date_add('2000-10-10',interval&nbsp;10&nbsp;year);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+-------------------------------------------+-------------------------------------------+------------------------------------------+-----------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;date_add('2000-10-10',interval&nbsp;10&nbsp;second)&nbsp;|&nbsp;date_add('2000-10-10',interval&nbsp;10&nbsp;minute)&nbsp;|&nbsp;date_add('2000-10-10',interval&nbsp;10&nbsp;month)&nbsp;|&nbsp;date_add('2000-10-10',interval&nbsp;10&nbsp;year)&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+-------------------------------------------+-------------------------------------------+------------------------------------------+-----------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;2000-10-10&nbsp;00:00:10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2000-10-10&nbsp;00:10:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2001-08-10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2010-10-10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+-------------------------------------------+-------------------------------------------+------------------------------------------+-----------------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>unix_timestamp()：获取时间戳
                <div id="highlighter_491292" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;unix_timestamp();</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;unix_timestamp()&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1561342893&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>select from_unixtime()：将指定时间戳转换成对应的日期时间格
                <div id="highlighter_565626" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;from_unixtime(1234567890);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;from_unixtime(1234567890)&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;2009-02-14&nbsp;07:31:30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ul>


        <h3>数学函数</h3>
        <ul>
            <li>abs()：绝对值</li>
            <li>ceiling()：向上取整</li>
            <li>floor()：向下取整</li>
            <li>pow()：求指数,数字的多少次方</li>
            <li>rand()：获取一个随机数(0-1之间)</li>
            <li>round()：四舍五入取整</li>
        </ul>
        <div id="highlighter_102684" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;abs(-1),ceiling(1.1),floor(1.8),pow(2,10),rand(),round(1.5);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------+--------------+------------+-----------+---------------------+------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;abs(-1)&nbsp;|&nbsp;ceiling(1.1)&nbsp;|&nbsp;floor(1.8)&nbsp;|&nbsp;pow(2,10)&nbsp;|&nbsp;rand()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;round(1.5)&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------+--------------+------------+-----------+---------------------+------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1024&nbsp;|&nbsp;0.16464579027578774&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------+--------------+------------+-----------+---------------------+------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.02&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>

        <h3>其它函数</h3>

        <ul>
            <li>md5()：对数据进行mas加密（mysql中的md5与其他任何地方的md5加密出来的内容是完全相同的）</li>
            <li>version()：获取版本号</li>
            <li>databse()：显示当前所在数据库</li>
            <li>uuid()：生成一个唯一标识符，uuid是整库(数据唯一同时空间唯一)</li>
        </ul>
        <div id="highlighter_281163" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;md5('a'),version(),database(),uuid();</code></div><div class="line number2 index1 alt1"><code class="xml plain">+----------------------------------+-----------+------------+--------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;md5('a')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;version()&nbsp;|&nbsp;database()&nbsp;|&nbsp;uuid()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+----------------------------------+-----------+------------+--------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;0cc175b9c0f1b6a831c399e269772661&nbsp;|&nbsp;8.0.15&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;mydatabase&nbsp;|&nbsp;3afea3e5-9629-11e9-ba48-c85b763f6cbc&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+----------------------------------+-----------+------------+--------------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.07&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>
        <hr>
        <h2>自定义函数</h2>

        <p>自定义函数：用户自己定义的函数</p>
        <p>函数：实现某种功能的语句块（由多条语句组成）</p>
        <p>函数是一个整体，而且函数是在被调用的时候才会执行，那么当设计函数的时候，意味着整体不能被中断。函数内部的每条指令都是一个独立的个体，需要符合语句定义规范，需要语句结束符也就是分号。但是mysql一旦见到语句结束符分号，就会自动开始执行，也就是说函数体内一旦有分号，那么函数在定义的时候会直接执行，这会导致定义失败</p>
        <p><em>解决方案</em>：在定义函数之前，尝试修改临时的语句结束符</p>
        <p><em>基本语法</em>：<strong>delimiter 新符号[可以使用系统非内置即可，如$$]</strong></p>
        <p>记得最后把语句结束符改回分号</p>

        <h3>创建函数</h3>
        <p>自定义函数包含几个要素：function关键字，函数名，参数(形参和实参[可选])，确认函数返回值类型，函数体，返回值</p>
        <p>函数定义基本语法：</p>
        <div id="highlighter_678701" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">修改语句结束符</code></div><div class="line number2 index1 alt1"><code class="xml plain">create&nbsp;function&nbsp;函数名(形参&nbsp;参数类型)&nbsp;returns&nbsp;返回值类型</code></div><div class="line number3 index2 alt2"><code class="xml plain">begin</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">//函数体</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">return&nbsp;返回值数据;&nbsp;&nbsp;&nbsp;//数据必须与结构中定义的返回值类型一致</code></div><div class="line number6 index5 alt1"><code class="xml plain">end</code></div><div class="line number7 index6 alt2"><code class="xml plain">语句结束符</code></div></div></td></tr></tbody></table>
        </div>
        <p><em>注意</em>：</p>
        <ul>
            <li>如果函数体只有一条语句，就可以省略begin和end</li>
            <li>函数因为必须规范返回值，那么在函数内部不能使用select指令，因为select一旦执行就会得到一个结果（但是用select给变量赋值是可以的select 字段 into @变量;）</li>
            <li>自定义函数是属于某个数据库的，只有在这个数据库中才能使用，要想在别的数据库中使用需要加上这个数据库的限定名，也就是以“<em>数据库名.函数名</em>”的形式调用</li>
        </ul>
        <p>示例（未修改语句结束符导致失败）</p>
        <div id="highlighter_722114" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;创建无参的自定义函数</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;function&nbsp;my_func1()&nbsp;returns&nbsp;int</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;begin</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;10;</code></div><div class="line number6 index5 alt1"><code class="xml plain">ERROR&nbsp;1064&nbsp;(42000):&nbsp;You&nbsp;have&nbsp;an&nbsp;error&nbsp;in&nbsp;your&nbsp;SQL&nbsp;syntax;&nbsp;check&nbsp;the&nbsp;manual&nbsp;that&nbsp;corresponds&nbsp;to&nbsp;your&nbsp;MySQL&nbsp;server&nbsp;version&nbsp;for&nbsp;the&nbsp;right&nbsp;syntax&nbsp;to&nbsp;use&nbsp;near&nbsp;''&nbsp;at&nbsp;line&nbsp;3</code></div><div class="line number7 index6 alt2"><code class="xml plain">mysql&gt;&nbsp;end</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;--&nbsp;结束</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;;</code></div><div class="line number10 index9 alt1"><code class="xml plain">ERROR&nbsp;1064&nbsp;(42000):&nbsp;You&nbsp;have&nbsp;an&nbsp;error&nbsp;in&nbsp;your&nbsp;SQL&nbsp;syntax;&nbsp;check&nbsp;the&nbsp;manual&nbsp;that&nbsp;corresponds&nbsp;to&nbsp;your&nbsp;MySQL&nbsp;server&nbsp;version&nbsp;for&nbsp;the&nbsp;right&nbsp;syntax&nbsp;to&nbsp;use&nbsp;near&nbsp;'end'&nbsp;at&nbsp;line&nbsp;1</code></div></div></td></tr></tbody></table>
        </div>
        <p>示例（定义无参自定义函数）</p>
        <div id="highlighter_118159" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;创建自定义函数</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;修改语句结束符</code></div><div class="line number4 index3 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;$$</code></div><div class="line number5 index4 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;function&nbsp;my_func1()&nbsp;returns&nbsp;int</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;begin</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;10;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;end</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;--&nbsp;结束</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;$$</code></div><div class="line number11 index10 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.05&nbsp;sec)</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;修改语句结束符(改回来)</code></div><div class="line number14 index13 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;;</code></div></div></td></tr></tbody></table>
        </div>
        <div style="background-color: #f3dd002e; height: 300px;overflow-y: auto;border: 1px gray dotted;">
            <p>此时如果报“ERROR 1418 (HY000)”错，那可能是如下原因</p>
            <div id="highlighter_925553" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">ERROR&nbsp;1418&nbsp;(HY000):&nbsp;This&nbsp;function&nbsp;has&nbsp;none&nbsp;of&nbsp;DETERMINISTIC,&nbsp;NO&nbsp;SQL,&nbsp;or&nbsp;READS&nbsp;SQL&nbsp;DATA&nbsp;in&nbsp;its&nbsp;declaration&nbsp;and&nbsp;binary&nbsp;logging&nbsp;is&nbsp;enabled&nbsp;(you&nbsp;*might*&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;less&nbsp;safe&nbsp;log_bin_trust_function_creators&nbsp;variable)</code></div></div></td></tr></tbody></table>
            </div>
            <p>原因：这是我们开启了bin-log, 我们就必须指定我们的函数是否是</p>
            <ul>
                <li>DETERMINISTIC 不确定的</li>
                <li>NO SQL 没有SQl语句，当然也不会修改数据</li>
                <li>READS SQL DATA 只是读取数据，当然也不会修改数据</li>
                <li>MODIFIES SQL DATA 要修改数据</li>
                <li>CONTAINS SQL 包含了SQL语句</li>
            </ul>
            <p>其中在function里面，只有 DETERMINISTIC, NO SQL 和 READS SQL DATA 被支持。如果我们开启了 bin-log, 我们就必须为我们的function指定一个参数</p>
            <p>解决方法：</p>
            <div id="highlighter_288274" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;variables&nbsp;like&nbsp;'log_bin_trust_function_creators';</code></div><div class="line number2 index1 alt1"><code class="xml plain">+---------------------------------+-------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;Variable_name&nbsp;|&nbsp;Value&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+---------------------------------+-------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;log_bin_trust_function_creators&nbsp;|&nbsp;OFF&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+---------------------------------+-------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">mysql&gt;&nbsp;set&nbsp;global&nbsp;log_bin_trust_function_creators=1;</code></div><div class="line number8 index7 alt1"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;variables&nbsp;like&nbsp;'log_bin_trust_function_creators';</code></div><div class="line number9 index8 alt2"><code class="xml plain">+---------------------------------+-------+</code></div><div class="line number10 index9 alt1"><code class="xml plain">|&nbsp;Variable_name&nbsp;|&nbsp;Value&nbsp;|</code></div><div class="line number11 index10 alt2"><code class="xml plain">+---------------------------------+-------+</code></div><div class="line number12 index11 alt1"><code class="xml plain">|&nbsp;log_bin_trust_function_creators&nbsp;|&nbsp;ON&nbsp;|</code></div><div class="line number13 index12 alt2"><code class="xml plain">+---------------------------------+-------+</code></div></div></td></tr></tbody></table>
            </div>
            <p>这样添加了参数以后，如果mysqld重启，那个参数又会消失，因此记得在在MySQL配置文件my.ini或my.cnf中的[mysqld]段上加<strong>log-bin-trust-function-creators=1</strong></p>
            <div><a href="https://dev.mysql.com/doc/refman/8.0/en/stored-programs-logging.html" target="_blank">官方文档</a></div>
        </div>
        <p>示例（定义有参自定义函数并省略begin和end）</p>
        <div id="highlighter_624452" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;创建自定义函数</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;function&nbsp;my_func2(a&nbsp;int,b&nbsp;int)&nbsp;returns&nbsp;int</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;return&nbsp;a+b;</code></div><div class="line number5 index4 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.02&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>

        <h3>查看函数</h3>
        <p>可以通过查看function状态,查看所有的函数</p>
        <p><strong>show function status [like 'pattern'];</strong></p>
        <div id="highlighter_557425" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;function&nbsp;status\G</code></div><div class="line number2 index1 alt1"><code class="xml plain">***************************&nbsp;1.&nbsp;row&nbsp;***************************</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Db:&nbsp;mydatabase</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Name:&nbsp;my_func1</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Type:&nbsp;FUNCTION</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Definer:&nbsp;root@localhost</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Modified:&nbsp;2019-06-25&nbsp;07:40:50</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Created:&nbsp;2019-06-25&nbsp;07:40:50</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Security_type:&nbsp;DEFINER</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Comment:</code></div><div class="line number11 index10 alt2"><code class="xml plain">character_set_client:&nbsp;utf8</code></div><div class="line number12 index11 alt1"><code class="xml plain">collation_connection:&nbsp;utf8_general_ci</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">Database&nbsp;Collation:&nbsp;utf8_general_ci</code></div><div class="line number14 index13 alt1"><code class="xml plain">***************************&nbsp;2.&nbsp;row&nbsp;***************************</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Db:&nbsp;mydatabase</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Name:&nbsp;my_func2</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Type:&nbsp;FUNCTION</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Definer:&nbsp;root@localhost</code></div><div class="line number19 index18 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Modified:&nbsp;2019-06-25&nbsp;08:14:23</code></div><div class="line number20 index19 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Created:&nbsp;2019-06-25&nbsp;08:14:23</code></div><div class="line number21 index20 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Security_type:&nbsp;DEFINER</code></div><div class="line number22 index21 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Comment:</code></div><div class="line number23 index22 alt2"><code class="xml plain">character_set_client:&nbsp;utf8</code></div><div class="line number24 index23 alt1"><code class="xml plain">collation_connection:&nbsp;utf8_general_ci</code></div><div class="line number25 index24 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">Database&nbsp;Collation:&nbsp;utf8_general_ci</code></div><div class="line number26 index25 alt1"><code class="xml plain">***************************&nbsp;3.&nbsp;row&nbsp;***************************</code></div><div class="line number27 index26 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Db:&nbsp;sys</code></div><div class="line number28 index27 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Name:&nbsp;extract_schema_from_file_name</code></div><div class="line number29 index28 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Type:&nbsp;FUNCTION</code></div><div class="line number30 index29 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Definer:&nbsp;mysql.sys@localhost</code></div><div class="line number31 index30 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Modified:&nbsp;2019-03-06&nbsp;17:53:21</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="xml plain">--&nbsp;后面太长故省略</code></div></div></td></tr></tbody></table>
        </div>
        <p>注意第一行“Db: mydatabase”表示函数属于mydatabase数据库，只有在这个数据库中才能使用该函数</p>

        <p>查看函数创建语句</p>
        <p><strong> show create function <em>函数名</em>;</strong></p>
        <div id="highlighter_243022" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;create&nbsp;function&nbsp;my_func1\G</code></div><div class="line number2 index1 alt1"><code class="xml plain">***************************&nbsp;1.&nbsp;row&nbsp;***************************</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Function:&nbsp;my_func1</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">sql_mode:&nbsp;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Create&nbsp;Function:&nbsp;CREATE&nbsp;DEFINER=`root`@`localhost`&nbsp;FUNCTION&nbsp;`my_func1`()&nbsp;RETURNS&nbsp;int(11)</code></div><div class="line number6 index5 alt1"><code class="xml plain">begin</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">return&nbsp;10;</code></div><div class="line number8 index7 alt1"><code class="xml plain">end</code></div><div class="line number9 index8 alt2"><code class="xml plain">character_set_client:&nbsp;utf8</code></div><div class="line number10 index9 alt1"><code class="xml plain">collation_connection:&nbsp;utf8_general_ci</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">Database&nbsp;Collation:&nbsp;utf8_general_ci</code></div><div class="line number12 index11 alt1"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>
        <h3>调用函数</h3>
        <p><em>基本语法</em>：<strong>select <em>函数名</em>(<em>实参</em>);</strong></p>
        <div id="highlighter_646662" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;my_func1(),my_func2(12,88);</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------+-----------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;my_func1()&nbsp;|&nbsp;my_func2(12,88)&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------+-----------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------+-----------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>



        <h3>删除函数</h3>
        <p><em>基本语法</em>：<strong>drop function <em>函数名</em>;</strong></p>





    </div>
</article>
<footer></footer>
</body>
</html>
