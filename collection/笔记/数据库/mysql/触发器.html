<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>触发器</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside class="k-catelog-list" id="catelog-list"></aside>
<article>
    <header>
        <h1>触发器</h1>
        <div id="info">
            <div id="time">2019-06-26</div>
            <div id="author">作者：<span><a href="javascript:myAlert();">loubth</a></span></div>
        </div>
    </header>
    <div id="k-catelog" class="content doc">


        <h2>基本概念</h2>
        <p><em>触发器</em>：trigger，是一种非常接近于js中的事件的知识。提前给某张表的所有记录（行）绑定一段代码，如果改行的操作满足条件（触发），这段提前准备好的代码就会自动执行</p>
        <p><em>触发器是一种特殊类型的存储过程</em>，它不同于我们前面介绍过的存储过程。触发器主要是通过事件进行触发而被执行的，而存储过程可以通过存储过程名字而被直接调用</p>
        <h2>作用</h2>
        <ul>
            <li>可在写入数据表前，强制检验或转换数据（保证数据安全）</li>
            <li>触发器发生错误时，异动的结果会被撤销（如果触发器执行错误，那么前面用户已经执行成功的操作也会被撤销：事务安全）</li>
            <li>部份数据库管理系统可以针对数据定义语言（DDL）使用触发器，称为DDL触发器</li>
            <li>可依照特定的情况，替换异动的指令（INSTEAD OF），mysql不支持此特性</li>
        </ul>

        <h2>触发器的优缺点</h2>
        <h3>优点</h3>
        <ul>
            <li>触发器可通过数据库中的相关表实现级联更改。（如果某张表的数据改变，可以利用触发器来实现其他表的无痕操作[用户不知道]）</li>
            <li>保证数据安全：进行安全校验</li>
        </ul>
        <h3>缺点</h3>

        <ul>
            <li>对触发器过分的依赖，势必影响数据库的结构，同时增加了维护的复杂程度</li>
            <li>造成数据在程序层面不可控（如php层）</li>
        </ul>


        <h2>触发器的基本操作</h2>
        <h3>创建触发器</h3>
        <h4>基本语法</h4>
        <div id="highlighter_325466" class="syntaxhighlighter nogutter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">create&nbsp;trigger&nbsp;触发器名字&nbsp;触发时机&nbsp;触发事件&nbsp;on&nbsp;表&nbsp;for&nbsp;each&nbsp;row&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></div><div class="line number2 index1 alt1"><code class="xml plain">begin</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">end</code></div></div></td></tr></tbody></table>
        </div>
        <p><em>触发对象</em>：“on 表 for each row”，触发器绑定实质是表中的所有行，因此当每一行发生指定的改变的时候，就会触发触发器</p>

        <h4>触发时机</h4>
        <p><em>触发时机</em>：每张表中对应的行都会有不同的状态，当SQL指令生效的时候，都会令行中数据发生改变，每一行总会有两种状态，数据操作前和操作后</p>
        <p>before：在表中数据发生改变前的状态
        <br>after：在表中数据发生改变后的状态</p>
        <h4>触发事件</h4>
        <p><em>触发事件</em>：mysql中触发器针对的目标是数据发生改变，对应的操作只有写操作（增删改）</p>
        <p>insert：插入操作
        <br>update：更新操作
        <br>delete：删除操作</p>
        <h4>注意事项</h4>
        <p>一张表中，每一个触发时机绑定的触发事件对应的触发器类型只能有一个，因此，一张表中最多的触发器只能有6个： </p>
        <ol>
            <li>before insert</li>
            <li>before update</li>
            <li>before delete</li>
            <li>after insert</li>
            <li>after update</li>
            <li>after delete</li>
        </ol>

        <h4>示例</h4>
        <p><em>需求</em>：有两张表，一张是商品表，一张是订单表（保留商品id），每次订单生成，商品表中对应的库存就应该发生变化</p>
        <ol>
            <li>创建两张表：商品表和订单表
                <div id="highlighter_197526" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;创建两张表</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;table&nbsp;my_goods(</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;id&nbsp;int&nbsp;primary&nbsp;key&nbsp;auto_increment,</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;name&nbsp;varchar(20)&nbsp;not&nbsp;null,</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;inv&nbsp;int</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;)charset&nbsp;utf8;</code></div><div class="line number7 index6 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected,&nbsp;1&nbsp;warning&nbsp;(0.45&nbsp;sec)</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="xml plain">mysql&gt;</code></div><div class="line number10 index9 alt1"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;table&nbsp;my_orders(</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;id&nbsp;int&nbsp;primary&nbsp;key&nbsp;auto_increment,</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;goods_id&nbsp;int&nbsp;not&nbsp;null,</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;goods_num&nbsp;int&nbsp;not&nbsp;null</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;)charset&nbsp;utf8;</code></div><div class="line number15 index14 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected,&nbsp;1&nbsp;warning&nbsp;(0.04&nbsp;sec)</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="xml plain">mysql&gt;&nbsp;insert&nbsp;into&nbsp;my_goods&nbsp;values(null,'手机',1000),(null,'电脑',500),(null,'游戏机',100);</code></div><div class="line number18 index17 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;3&nbsp;rows&nbsp;affected&nbsp;(0.03&nbsp;sec)</code></div><div class="line number19 index18 alt2"><code class="xml plain">Records:&nbsp;3&nbsp;&nbsp;Duplicates:&nbsp;0&nbsp;&nbsp;Warnings:&nbsp;0</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number22 index21 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number23 index22 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number24 index23 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number25 index24 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;1000&nbsp;|</code></div><div class="line number26 index25 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;500&nbsp;|</code></div><div class="line number27 index26 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number28 index27 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number29 index28 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number32 index31 alt1"><code class="xml plain">Empty&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>创建触发器：如果订单表发生数据插入对应的商品就应该减少库存
                <div id="highlighter_696617" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;创建触发器</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;$$</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;trigger&nbsp;after_insert_order_t&nbsp;after&nbsp;insert&nbsp;on&nbsp;my_orders&nbsp;for&nbsp;each&nbsp;row</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;begin</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;更新商品库存</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update&nbsp;my_goods&nbsp;set&nbsp;inv=inv-1&nbsp;where&nbsp;id&nbsp;=1;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;end</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;$$</code></div><div class="line number9 index8 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.01&nbsp;sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;;</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ol>



        <h3>查看触发器</h3>
        <ul>
            <li>查看全部触发器
                <p><em>基本语法</em>：<strong>show triggers;</strong></p>
                <div id="highlighter_393451" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;triggers\G</code></div><div class="line number2 index1 alt1"><code class="xml plain">***************************&nbsp;1.&nbsp;row&nbsp;***************************</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Trigger:&nbsp;after_insert_order_t</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Event:&nbsp;INSERT</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Table:&nbsp;my_orders</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Statement:&nbsp;begin</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="xml plain">update&nbsp;my_goods&nbsp;set&nbsp;inv=inv-1&nbsp;where&nbsp;id&nbsp;=1;</code></div><div class="line number9 index8 alt2"><code class="xml plain">end</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Timing:&nbsp;AFTER</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Created:&nbsp;2019-06-26&nbsp;16:38:46.02</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">sql_mode:&nbsp;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Definer:&nbsp;root@localhost</code></div><div class="line number14 index13 alt1"><code class="xml plain">character_set_client:&nbsp;utf8</code></div><div class="line number15 index14 alt2"><code class="xml plain">collation_connection:&nbsp;utf8_general_ci</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">Database&nbsp;Collation:&nbsp;utf8_general_ci</code></div><div class="line number17 index16 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.15&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
            <li>查看触发器的创建语句
                <p><em>基本语法</em>：<strong>show create trigger <em>触发器名字</em>;</strong></p>
                <div id="highlighter_127103" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;create&nbsp;trigger&nbsp;after_insert_order_t\G</code></div><div class="line number2 index1 alt1"><code class="xml plain">***************************&nbsp;1.&nbsp;row&nbsp;***************************</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Trigger:&nbsp;after_insert_order_t</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">sql_mode:&nbsp;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</code></div><div class="line number5 index4 alt2"><code class="xml plain">SQL&nbsp;Original&nbsp;Statement:&nbsp;CREATE&nbsp;DEFINER=`root`@`localhost`&nbsp;TRIGGER&nbsp;`after_insert_order_t`&nbsp;AFTER&nbsp;INSERT&nbsp;ON&nbsp;`my_orders`&nbsp;FOR&nbsp;EACH&nbsp;ROW&nbsp;begin</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="xml plain">update&nbsp;my_goods&nbsp;set&nbsp;inv=inv-1&nbsp;where&nbsp;id&nbsp;=1;</code></div><div class="line number8 index7 alt1"><code class="xml plain">end</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">character_set_client:&nbsp;utf8</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">collation_connection:&nbsp;utf8_general_ci</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Database&nbsp;Collation:&nbsp;utf8_general_ci</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">Created:&nbsp;2019-06-26&nbsp;16:38:46.02</code></div><div class="line number13 index12 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ul>

        <h3>触发触发器</h3>
        <p>想办法让触发器执行：让触发器指定的表中，对应的时机发生对应的操作即可</p>
        <ol>
            <li>表为my_orders</li>
            <li>在插入之后</li>
            <li>插入操作</li>
        </ol>
        <div id="highlighter_969317" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number2 index1 alt1"><code class="xml plain">Empty&nbsp;set&nbsp;(0.07&nbsp;sec)</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number5 index4 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number6 index5 alt1"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number7 index6 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number8 index7 alt1"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;1000&nbsp;|</code></div><div class="line number9 index8 alt2"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;500&nbsp;|</code></div><div class="line number10 index9 alt1"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number11 index10 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number12 index11 alt1"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="xml plain">mysql&gt;&nbsp;insert&nbsp;into&nbsp;my_orders&nbsp;values(null,1,1);</code></div><div class="line number15 index14 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;1&nbsp;row&nbsp;affected&nbsp;(0.05&nbsp;sec)</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number18 index17 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number19 index18 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;goods_id&nbsp;|&nbsp;goods_num&nbsp;|</code></div><div class="line number20 index19 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number21 index20 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|</code></div><div class="line number22 index21 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number23 index22 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number26 index25 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number27 index26 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number28 index27 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number29 index28 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;<strong>999</strong>&nbsp;|</code></div><div class="line number30 index29 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;500&nbsp;|</code></div><div class="line number31 index30 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number32 index31 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number33 index32 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>
        <h3>删除触发器</h3>
        <p>经过分析我们发现上面的触发器设置的是不合适的，因为无论插入什么最终执行的操作都是一样的。那我们就要删除这个不合适的触发器，如何删除呢？</p>
        <p><em>基本语法</em>：<strong>drop trigger <em>触发器名字</em>;</strong></p>
        <div id="highlighter_408437" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;drop&nbsp;trigger&nbsp;after_insert_order_t;</code></div><div class="line number2 index1 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.08&nbsp;sec)</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="xml plain">mysql&gt;&nbsp;show&nbsp;triggers;</code></div><div class="line number5 index4 alt2"><code class="xml plain">Empty&nbsp;set&nbsp;(0.03&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>


        <h2>触发器应用</h2>
        <h3>记录关键字：new、old</h3>
        <p>触发器针对的是数据表中的每条记录（每行），每行在数据操作前后都有一个对应的状态，触发器在执行之前就将对应的状态获取到了，将没有操作之前的状态（数据）都保存到old关键字中，而操作后的状态都放到new中。在触发器中，可以通过old和new来获取绑定表中对应的记录数据</p>
        <p><em>基本语法</em>：<strong>关键字.字段名</strong></p>
        <p>old和new并不是所有触发器都有：</p>
        <ul>
            <li>insert：插入前全为空，没有old</li>
            <li>delete：清空数据，没有new</li>
        </ul>

        <h3>商品自动扣除库存</h3>
        <p>示例（触发器定义）</p>
        <div id="highlighter_462999" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;自动扣除商品库存的触发器</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;$$</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;trigger&nbsp;a_i_o_t&nbsp;after&nbsp;insert&nbsp;on&nbsp;my_orders&nbsp;for&nbsp;each&nbsp;row</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;begin</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;--&nbsp;更新商品库存：new代表着新增的订单</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;update&nbsp;my_goods&nbsp;set&nbsp;inv=inv-new.goods_num&nbsp;where&nbsp;id=new.goods_id;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;end</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;$$</code></div><div class="line number9 index8 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.23&nbsp;sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;;</code></div></div></td></tr></tbody></table>
        </div>
        <p>测试</p>
        <div id="highlighter_268049" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number2 index1 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;999&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;500&nbsp;|</code></div><div class="line number7 index6 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number8 index7 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number9 index8 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number12 index11 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number13 index12 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;goods_id&nbsp;|&nbsp;goods_num&nbsp;|</code></div><div class="line number14 index13 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number15 index14 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|</code></div><div class="line number16 index15 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number17 index16 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="xml plain">mysql&gt;&nbsp;insert&nbsp;into&nbsp;my_orders&nbsp;values(null,2,5);</code></div><div class="line number20 index19 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;1&nbsp;row&nbsp;affected&nbsp;(0.02&nbsp;sec)</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number23 index22 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number24 index23 alt1"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number25 index24 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number26 index25 alt1"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;998&nbsp;|</code></div><div class="line number27 index26 alt2"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;495&nbsp;|</code></div><div class="line number28 index27 alt1"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number29 index28 alt2"><code class="xml plain">+----+-----------+------+</code></div><div class="line number30 index29 alt1"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number33 index32 alt2"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number34 index33 alt1"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;goods_id&nbsp;|&nbsp;goods_num&nbsp;|</code></div><div class="line number35 index34 alt2"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number36 index35 alt1"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|</code></div><div class="line number37 index36 alt2"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;|</code></div><div class="line number38 index37 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number39 index38 alt2"><code class="xml plain">2&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>

        <p>如果库存数量没有商品订单多怎么办？</p>
        <ul>
            <li>操作目标：订单表</li>
            <li>操作时机：下单前</li>
            <li>操作事件：插入</li>
        </ul>
        <p>示例（触发器定义）</p>
        <div id="highlighter_181351" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;判断库存</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;$$</code></div><div class="line number3 index2 alt2"><code class="xml plain">mysql&gt;&nbsp;create&nbsp;trigger&nbsp;b_i_o_t&nbsp;before&nbsp;insert&nbsp;on&nbsp;my_orders&nbsp;for&nbsp;each&nbsp;row</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;begin</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;取出库存数据进行判断</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;inv&nbsp;from&nbsp;my_goods&nbsp;where&nbsp;id&nbsp;=new.goods_id&nbsp;into&nbsp;@inv;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;判断</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@inv&nbsp;&lt;&nbsp;new.goods_num&nbsp;then</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;中断操作：暴力解决，主动出错</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;into&nbsp;xxx&nbsp;values('XXX');</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;if;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;end</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;$$</code></div><div class="line number14 index13 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.04&nbsp;sec)</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml plain">mysql&gt;&nbsp;delimiter&nbsp;;</code></div></div></td></tr></tbody></table>
        </div>
        <p>测试</p>
        <div id="highlighter_23977" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number2 index1 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;997&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;395&nbsp;|</code></div><div class="line number7 index6 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number8 index7 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number9 index8 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number12 index11 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number13 index12 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;goods_id&nbsp;|&nbsp;goods_num&nbsp;|</code></div><div class="line number14 index13 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number15 index14 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|</code></div><div class="line number16 index15 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;|</code></div><div class="line number17 index16 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number18 index17 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number19 index18 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="xml plain">mysql&gt;&nbsp;insert&nbsp;into&nbsp;my_orders&nbsp;values(null,2,400);</code></div><div class="line number22 index21 alt1"><code class="xml plain">ERROR&nbsp;1146&nbsp;(42S02):&nbsp;Table&nbsp;'mydatabase.xxx'&nbsp;doesn't&nbsp;exist</code></div><div class="line number23 index22 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_goods;</code></div><div class="line number24 index23 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number25 index24 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;inv&nbsp;&nbsp;|</code></div><div class="line number26 index25 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number27 index26 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;手机&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;997&nbsp;|</code></div><div class="line number28 index27 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;电脑&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;395&nbsp;|</code></div><div class="line number29 index28 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;游戏机&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number30 index29 alt1"><code class="xml plain">+----+-----------+------+</code></div><div class="line number31 index30 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="xml plain">mysql&gt;&nbsp;select&nbsp;*&nbsp;from&nbsp;my_orders;</code></div><div class="line number34 index33 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number35 index34 alt2"><code class="xml plain">|&nbsp;id&nbsp;|&nbsp;goods_id&nbsp;|&nbsp;goods_num&nbsp;|</code></div><div class="line number36 index35 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number37 index36 alt2"><code class="xml plain">|&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|</code></div><div class="line number38 index37 alt1"><code class="xml plain">|&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;|</code></div><div class="line number39 index38 alt2"><code class="xml plain">|&nbsp;&nbsp;3&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;|</code></div><div class="line number40 index39 alt1"><code class="xml plain">+----+----------+-----------+</code></div><div class="line number41 index40 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>




    </div>
</article>
<footer></footer>
</body>
</html>
