<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>外键</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside></aside>
<article>
    <header>
        <h1>外键</h1>
        <div id="info">
            <div id="time">2019-04-27</div>
            <div id="author">loubth</div>
        </div>
    </header>
    <div class="content doc">
        <h2>外键概念</h2>
        <p>外键：foreign key，如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为主表，具有此外键的表被称为主表的从表。外键又称作外关键字</p>
        <p>很绕，以我的理解举个例子吧，A表的一个字段指向B表的主键字段，那么A表的这个字段就是A表的外键，此时我们称B表是A表的“主表”，A表是B表的“从表”</p>
        <h2>外键的操作</h2>
        <h3>增加外键</h3>
        <p><em>注</em>：constraint是“约束”的意思，“`”这个符号<em>不是单引号</em>，是<a href="https://baike.baidu.com/item/%60/5633084?fr=aladdin" target="_blank">反单引号</a>，就是Esc键下面那个</p>
        <p>Mysql中提供了两种方式增加外键</p>
        <ol>
            <li>在创建表的时候增加外键（类似主键）
                <p><em>基本语法</em>：<strong>[CONSTRAINT `<em>外键名</em>`] FOREIGN KEY(<em>外键字段</em>) REFERENCES <em>主表</em>(<em>主键</em>);</strong></p>
                <p>如果不显式指定外键名，系统会自动生成</p>
                <p>示例</p>
                <div id="highlighter_515475" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;CREATE&nbsp;TABLE&nbsp;my_foreign(</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;id&nbsp;int&nbsp;PRIMARY&nbsp;KEY&nbsp;AUTO_INCREMENT,</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;name&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL,</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;--&nbsp;关联班级my_class</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;class_id&nbsp;int,</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;--&nbsp;增加外键</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;&nbsp;&nbsp;<strong>FOREIGN&nbsp;KEY(class_id)&nbsp;REFERENCES&nbsp;my_class(class_id)</strong></code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">-&gt;&nbsp;);</code></div><div class="line number9 index8 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.20&nbsp;sec)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="xml plain">mysql&gt;&nbsp;DESC&nbsp;my_foreign;</code></div><div class="line number12 index11 alt1"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number13 index12 alt2"><code class="xml plain">|&nbsp;Field&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Null&nbsp;|&nbsp;Key&nbsp;|&nbsp;Default&nbsp;|&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number14 index13 alt1"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number15 index14 alt2"><code class="xml plain">|&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;PRI&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;auto_increment&nbsp;|</code></div><div class="line number16 index15 alt1"><code class="xml plain">|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;varchar(10)&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number17 index16 alt2"><code class="xml plain">|&nbsp;class_id&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;MUL&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number18 index17 alt1"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number19 index18 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.07&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
                <p><em>注</em>：外键本身是一个索引，外键要求外键字段本身也是一种普通索引</p>
                <p>我们可能注意到表结构中设置为外键的字段它的KEY字段为“MUL”，这个“MUL”是multiple（多个）的简写，表示“该列是非唯一索引的第一列，其中允许在列中多次出现给定值”，这句话是什么意思呢？“非唯一索引”的意思是这个索引允许该列中的值重复，“第一列”是相对复合索引也就是多个字段组成的索引来说的，说明这个字段是组成复合索引中的字段中的第一个字段（参考<a href="https://dev.mysql.com/doc/refman/8.0/en/show-columns.html" target="_blank">官方文档</a>）</p>
                <p>我们查看一下创建表语句</p>
                <div id="highlighter_199160" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;SHOW&nbsp;CREATE&nbsp;TABLE&nbsp;my_foreign;</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Create&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;my_foreign&nbsp;|&nbsp;CREATE&nbsp;TABLE&nbsp;`my_foreign`&nbsp;(</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`id`&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT,</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`name`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL,</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`class_id`&nbsp;int(11)&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">PRIMARY&nbsp;KEY&nbsp;(`id`),</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">KEY&nbsp;`class_id`&nbsp;(`class_id`),</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">CONSTRAINT&nbsp;`my_foreign_ibfk_1`&nbsp;FOREIGN&nbsp;KEY&nbsp;(`class_id`)&nbsp;REFERENCES&nbsp;`my_class`&nbsp;(`class_id`)</code></div><div class="line number12 index11 alt1"><code class="xml plain">)&nbsp;ENGINE=InnoDB&nbsp;DEFAULT&nbsp;CHARSET=utf8&nbsp;|</code></div><div class="line number13 index12 alt2"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number14 index13 alt1"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.02&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
                <p>可以看到这其中有两个索引，一个是外键索引“<strong>CONSTRAINT `my_foreign_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `my_class` (`class_id`)</strong>”，另一个是创建外键时自动增加的普通索引“<strong>KEY `class_id` (`class_id`)</strong>”</p>


            </li>
            <li>在创建表后增加外键
                <p><em>基本语法</em>：<strong>ALTER TABLE <em>从表</em> ADD [CONSTRAINT `<em>外键名</em>`] FOREIGN KEY(<em>外键字段</em>) REFERENCES <em>主表</em>(<em>主键</em>);</strong></p>
                <p>示例</p>
                <div id="highlighter_422342" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;DESC&nbsp;my_class;</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------+-------------+------+-----+---------+-------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;Field&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Null&nbsp;|&nbsp;Key&nbsp;|&nbsp;Default&nbsp;|&nbsp;Extra&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------+-------------+------+-----+---------+-------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;class_id&nbsp;&nbsp;&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;PRI&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number6 index5 alt1"><code class="xml plain">|&nbsp;class_name&nbsp;|&nbsp;varchar(10)&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;UNI&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number7 index6 alt2"><code class="xml plain">+------------+-------------+------+-----+---------+-------+</code></div><div class="line number8 index7 alt1"><code class="xml plain">2&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="xml plain">mysql&gt;&nbsp;DESC&nbsp;my_student;</code></div><div class="line number11 index10 alt2"><code class="xml plain">+------------+----------------------------+------+-----+---------+-------+</code></div><div class="line number12 index11 alt1"><code class="xml plain">|&nbsp;Field&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Null&nbsp;|&nbsp;Key&nbsp;|&nbsp;Default&nbsp;|&nbsp;Extra&nbsp;|</code></div><div class="line number13 index12 alt2"><code class="xml plain">+------------+----------------------------+------+-----+---------+-------+</code></div><div class="line number14 index13 alt1"><code class="xml plain">|&nbsp;stu_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;varchar(10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;PRI&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number15 index14 alt2"><code class="xml plain">|&nbsp;stu_name&nbsp;&nbsp;&nbsp;|&nbsp;varchar(10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number16 index15 alt1"><code class="xml plain">|&nbsp;class_id&nbsp;&nbsp;&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number17 index16 alt2"><code class="xml plain">|&nbsp;stu_age&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;tinyint(3)&nbsp;unsigned&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number18 index17 alt1"><code class="xml plain">|&nbsp;stu_height&nbsp;|&nbsp;tinyint(3)&nbsp;unsigned&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number19 index18 alt2"><code class="xml plain">|&nbsp;gender&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;enum('男','女','保密')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number20 index19 alt1"><code class="xml plain">+------------+----------------------------+------+-----+---------+-------+</code></div><div class="line number21 index20 alt2"><code class="xml plain">6&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="xml plain">mysql&gt;&nbsp;<strong>ALTER&nbsp;TABLE&nbsp;my_student&nbsp;ADD&nbsp;FOREIGN&nbsp;KEY(class_id)&nbsp;REFERENCES&nbsp;my_class(class_id);</strong></code></div><div class="line number24 index23 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;7&nbsp;rows&nbsp;affected&nbsp;(0.09&nbsp;sec)</code></div><div class="line number25 index24 alt2"><code class="xml plain">Records:&nbsp;7&nbsp;&nbsp;Duplicates:&nbsp;0&nbsp;&nbsp;Warnings:&nbsp;0</code></div><div class="line number26 index25 alt1">&nbsp;</div><div class="line number27 index26 alt2"><code class="xml plain">mysql&gt;&nbsp;SHOW&nbsp;CREATE&nbsp;TABLE&nbsp;my_student;</code></div><div class="line number28 index27 alt1"><code class="xml plain">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number29 index28 alt2"><code class="xml plain">|&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Create&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number30 index29 alt1"><code class="xml plain">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number31 index30 alt2"><code class="xml plain">|&nbsp;my_student&nbsp;|&nbsp;CREATE&nbsp;TABLE&nbsp;`my_student`&nbsp;(</code></div><div class="line number32 index31 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_id`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL&nbsp;COMMENT&nbsp;'主键,学生id',</code></div><div class="line number33 index32 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_name`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL&nbsp;COMMENT&nbsp;'学生姓名',</code></div><div class="line number34 index33 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`class_id`&nbsp;int(11)&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number35 index34 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_age`&nbsp;tinyint(3)&nbsp;unsigned&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number36 index35 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_height`&nbsp;tinyint(3)&nbsp;unsigned&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number37 index36 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`gender`&nbsp;enum('男','女','保密')&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number38 index37 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">PRIMARY&nbsp;KEY&nbsp;(`stu_id`),</code></div><div class="line number39 index38 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">KEY&nbsp;`class_id`&nbsp;(`class_id`),</code></div><div class="line number40 index39 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">CONSTRAINT&nbsp;`my_student_ibfk_1`&nbsp;FOREIGN&nbsp;KEY&nbsp;(`class_id`)&nbsp;REFERENCES&nbsp;`my_class`&nbsp;(`class_id`)</code></div><div class="line number41 index40 alt2"><code class="xml plain">)&nbsp;ENGINE=InnoDB&nbsp;DEFAULT&nbsp;CHARSET=utf8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number42 index41 alt1"><code class="xml plain">+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number43 index42 alt2"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ol>
        <h3>修改&删除外键</h3>
        <p>外键不允许修改，但可以先删除后增加</p>
        <p><em>基本语法</em>：<strong>ALTER TABLE <em>从表</em> DROP FOREIGN KEY <em>外键名</em>;</strong></p>
        <p>示例</p>
        <div id="highlighter_489736" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;ALTER&nbsp;TABLE&nbsp;my_student&nbsp;DROP&nbsp;FOREIGN&nbsp;KEY&nbsp;my_student_ibfk_1;</code></div><div class="line number2 index1 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;0&nbsp;rows&nbsp;affected&nbsp;(0.02&nbsp;sec)</code></div><div class="line number3 index2 alt2"><code class="xml plain">Records:&nbsp;0&nbsp;&nbsp;Duplicates:&nbsp;0&nbsp;&nbsp;Warnings:&nbsp;0</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml plain">mysql&gt;&nbsp;SHOW&nbsp;CREATE&nbsp;TABLE&nbsp;my_student;</code></div><div class="line number6 index5 alt1"><code class="xml plain">+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">|&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Create&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number8 index7 alt1"><code class="xml plain">+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number9 index8 alt2"><code class="xml plain">|&nbsp;my_student&nbsp;|&nbsp;CREATE&nbsp;TABLE&nbsp;`my_student`&nbsp;(</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_id`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL&nbsp;COMMENT&nbsp;'主键,学生id',</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_name`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL&nbsp;COMMENT&nbsp;'学生姓名',</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`class_id`&nbsp;int(11)&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_age`&nbsp;tinyint(3)&nbsp;unsigned&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`stu_height`&nbsp;tinyint(3)&nbsp;unsigned&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`gender`&nbsp;enum('男','女','保密')&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">PRIMARY&nbsp;KEY&nbsp;(`stu_id`),</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain"><strong>KEY&nbsp;`class_id`&nbsp;(`class_id`)</strong></code></div><div class="line number18 index17 alt1"><code class="xml plain">)&nbsp;ENGINE=InnoDB&nbsp;DEFAULT&nbsp;CHARSET=utf8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number19 index18 alt2"><code class="xml plain">+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number20 index19 alt1"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>
        <p>我们看到，外键是删除了，但是注意创建外键时自动生成的索引“<strong>KEY `class_id` (`class_id`)</strong>”还在，如果想删除它，可以使用“<strong>ALTER TABLE <em>表名</em> DROP INDEX <em>索引名字</em>;</strong>”语法</p>

        <h2>外键基本要求</h2>
        <ol>
            <li>外键字段需要保证与关联的主表的主键字段类型完全一致</li>
            <li>基本属性也要相同</li>
            <li>如果是在表后增加外键，对数据还有一定的要求（从表数据与主表的关联关系）</li>
            <li>外键只能使用innodb存储引擎，myisam不支持</li>
        </ol>
        <h2>外键约束</h2>
        <p>外键约束：建立外键关系对主表和从表都会有一定的数据约束效果</p>
        <h3>约束效果</h3>
        <ol>
            <li>当一个外键产生时，外键所在的表（从表）会受制于主表数据的存在，导致数据不能进行某些不符合规范的操作（比如不能插入主表关联字段不存在的数据）
                <p>示例</p>
                <div id="highlighter_637983" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;SHOW&nbsp;CREATE&nbsp;TABLE&nbsp;my_foreign;</code></div><div class="line number2 index1 alt1"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number3 index2 alt2"><code class="xml plain">|&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Create&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number4 index3 alt1"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number5 index4 alt2"><code class="xml plain">|&nbsp;my_foreign&nbsp;|&nbsp;CREATE&nbsp;TABLE&nbsp;`my_foreign`&nbsp;(</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`id`&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT,</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`name`&nbsp;varchar(10)&nbsp;NOT&nbsp;NULL,</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">`class_id`&nbsp;int(11)&nbsp;DEFAULT&nbsp;NULL,</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">PRIMARY&nbsp;KEY&nbsp;(`id`),</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">KEY&nbsp;`class_id`&nbsp;(`class_id`),</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">CONSTRAINT&nbsp;`my_foreign_ibfk_1`&nbsp;FOREIGN&nbsp;KEY&nbsp;(`class_id`)&nbsp;REFERENCES&nbsp;`my_class`&nbsp;(`class_id`)</code></div><div class="line number12 index11 alt1"><code class="xml plain">)&nbsp;ENGINE=InnoDB&nbsp;DEFAULT&nbsp;CHARSET=utf8&nbsp;|</code></div><div class="line number13 index12 alt2"><code class="xml plain">+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</code></div><div class="line number14 index13 alt1"><code class="xml plain">1&nbsp;row&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="xml plain">mysql&gt;&nbsp;DESC&nbsp;my_foreign;</code></div><div class="line number17 index16 alt2"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number18 index17 alt1"><code class="xml plain">|&nbsp;Field&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Null&nbsp;|&nbsp;Key&nbsp;|&nbsp;Default&nbsp;|&nbsp;Extra&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number19 index18 alt2"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number20 index19 alt1"><code class="xml plain">|&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;PRI&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;auto_increment&nbsp;|</code></div><div class="line number21 index20 alt2"><code class="xml plain">|&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;varchar(10)&nbsp;|&nbsp;NO&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number22 index21 alt1"><code class="xml plain">|&nbsp;class_id&nbsp;|&nbsp;int(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;YES&nbsp;&nbsp;|&nbsp;MUL&nbsp;|&nbsp;NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number23 index22 alt2"><code class="xml plain">+----------+-------------+------+-----+---------+----------------+</code></div><div class="line number24 index23 alt1"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="xml plain">mysql&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;my_class;</code></div><div class="line number27 index26 alt2"><code class="xml plain">+----------+------------+</code></div><div class="line number28 index27 alt1"><code class="xml plain">|&nbsp;class_id&nbsp;|&nbsp;class_name&nbsp;|</code></div><div class="line number29 index28 alt2"><code class="xml plain">+----------+------------+</code></div><div class="line number30 index29 alt1"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;1班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number31 index30 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;2班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number32 index31 alt1"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;|&nbsp;3班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number33 index32 alt2"><code class="xml plain">+----------+------------+</code></div><div class="line number34 index33 alt1"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number35 index34 alt2">&nbsp;</div><div class="line number36 index35 alt1"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;向从表插入数据</code></div><div class="line number37 index36 alt2"><code class="xml plain">mysql&gt;&nbsp;<strong>INSERT&nbsp;INTO&nbsp;my_foreign&nbsp;VALUES(null,'小明',1);</strong>&nbsp;&nbsp;--&nbsp;正确</code></div><div class="line number38 index37 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;1&nbsp;row&nbsp;affected&nbsp;(0.01&nbsp;sec)</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="xml plain">mysql&gt;&nbsp;<strong>INSERT&nbsp;INTO&nbsp;my_foreign&nbsp;VALUES(null,'小李',4);</strong>&nbsp;&nbsp;--&nbsp;不正确，主表没有class_id为4的记录</code></div><div class="line number41 index40 alt2"><code class="xml plain">ERROR&nbsp;1452&nbsp;(23000):&nbsp;Cannot&nbsp;add&nbsp;or&nbsp;update&nbsp;a&nbsp;child&nbsp;row:&nbsp;a&nbsp;foreign&nbsp;key&nbsp;constraint&nbsp;fails&nbsp;(`mydatabase`.`my_foreign`,&nbsp;CONSTRAINT&nbsp;`my_foreign_ibfk_1`&nbsp;FOREIGN&nbsp;KEY&nbsp;(`class_id`)&nbsp;REFERENCES&nbsp;`my_class`&nbsp;(`class_id`))</code></div></div></td></tr></tbody></table>
                </div>

            </li>
            <li>如果一张表（主表）被其他表（从表）外键引入，那么该表（主表）的数据操作就不能随意，必须保证从表数据的有效性（比如不能随便删除一个被从表引入的记录）
                <p>示例</p>
                <div id="highlighter_601656" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;DELETE&nbsp;FROM&nbsp;my_class&nbsp;WHERE&nbsp;class_id=1;</code></div><div class="line number2 index1 alt1"><code class="xml plain">ERROR&nbsp;1451&nbsp;(23000):&nbsp;Cannot&nbsp;delete&nbsp;or&nbsp;update&nbsp;a&nbsp;parent&nbsp;row:&nbsp;a&nbsp;foreign&nbsp;key&nbsp;constraint&nbsp;fails&nbsp;(`mydatabase`.`my_foreign`,&nbsp;CONSTRAINT&nbsp;`my_foreign_ibfk_1`&nbsp;FOREIGN&nbsp;KEY&nbsp;(`class_id`)&nbsp;REFERENCES&nbsp;`my_class`&nbsp;(`class_id`))</code></div></div></td></tr></tbody></table>
                </div>
            </li>
        </ol>
        <h3>外键约束的选择性操作</h3>
        <p>可以在创建外键的时候，对外键约束进行选择性的操作</p>
        <p><em>基本语法</em>：<strong>ADD FOREIGN KEY(<em>外键字段</em>) REFERENCES <em>主表</em>(<em>主键</em>) ON <em>约束模式</em>;</strong></p>
        <p>约束模式有三种：</p>
        <ol>
            <li>district：严格模式，默认的，不允许操作</li>
            <li>cascade：级联模式，一起操作，主表变化，从表数据跟着变化</li>
            <li>set null：置空模式，主表变化（删除），从表对应记录设置为空：前提是从表中对应的外键字段允许为空</li>
        </ol>
        <p>外键约束主要约束的对象是主表操作，从表就是不能插入主表不存在的数据</p>
        <p>通常在进行约束时候的时候，需要指定操作：update和delete</p>
        <p>常用的约束模式：on update cascade，on delete set null，更新级联，删除置空</p>
        <p>示例</p>
        <div id="highlighter_77521" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;ALTER&nbsp;TABLE&nbsp;my_student&nbsp;ADD&nbsp;FOREIGN&nbsp;KEY(class_id)&nbsp;REFERENCES&nbsp;my_class(class_id)&nbsp;<strong>ON&nbsp;UPDATE&nbsp;CASCADE&nbsp;ON&nbsp;DELETE&nbsp;SET&nbsp;NULL</strong>;</code></div><div class="line number2 index1 alt1"><code class="xml plain">Query&nbsp;OK,&nbsp;7&nbsp;rows&nbsp;affected&nbsp;(0.14&nbsp;sec)</code></div><div class="line number3 index2 alt2"><code class="xml plain">Records:&nbsp;7&nbsp;&nbsp;Duplicates:&nbsp;0&nbsp;&nbsp;Warnings:&nbsp;0</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml plain">mysql&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;my_class;</code></div><div class="line number6 index5 alt1"><code class="xml plain">+----------+------------+</code></div><div class="line number7 index6 alt2"><code class="xml plain">|&nbsp;class_id&nbsp;|&nbsp;class_name&nbsp;|</code></div><div class="line number8 index7 alt1"><code class="xml plain">+----------+------------+</code></div><div class="line number9 index8 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;1班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number10 index9 alt1"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;2班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number11 index10 alt2"><code class="xml plain">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;|&nbsp;3班&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number12 index11 alt1"><code class="xml plain">+----------+------------+</code></div><div class="line number13 index12 alt2"><code class="xml plain">3&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="xml plain">mysql&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;my_student;</code></div><div class="line number16 index15 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number17 index16 alt2"><code class="xml plain">|&nbsp;stu_id&nbsp;&nbsp;|&nbsp;stu_name&nbsp;|&nbsp;class_id&nbsp;|&nbsp;stu_age&nbsp;|&nbsp;stu_height&nbsp;|&nbsp;gender&nbsp;|</code></div><div class="line number18 index17 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number19 index18 alt2"><code class="xml plain">|&nbsp;stu0001&nbsp;|&nbsp;夏洛&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;185&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number20 index19 alt1"><code class="xml plain">|&nbsp;stu0002&nbsp;|&nbsp;张四&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;165&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number21 index20 alt2"><code class="xml plain">|&nbsp;stu0003&nbsp;|&nbsp;张五&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;187&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number22 index21 alt1"><code class="xml plain">|&nbsp;stu0004&nbsp;|&nbsp;小婷&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;189&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number23 index22 alt2"><code class="xml plain">|&nbsp;stu0005&nbsp;|&nbsp;小猪&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;173&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number24 index23 alt1"><code class="xml plain">|&nbsp;stu0006&nbsp;|&nbsp;小狗&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;170&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number25 index24 alt2"><code class="xml plain">|&nbsp;stu0007&nbsp;|&nbsp;小江&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;178&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number26 index25 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number27 index26 alt2"><code class="xml plain">7&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;更新主表</code></div><div class="line number30 index29 alt1"><code class="xml plain">mysql&gt;&nbsp;UPDATE&nbsp;<strong>my_class</strong>&nbsp;SET&nbsp;class_id=4&nbsp;WHERE&nbsp;class_id=2;</code></div><div class="line number31 index30 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;1&nbsp;row&nbsp;affected&nbsp;(0.01&nbsp;sec)</code></div><div class="line number32 index31 alt1"><code class="xml plain">Rows&nbsp;matched:&nbsp;1&nbsp;&nbsp;Changed:&nbsp;1&nbsp;&nbsp;Warnings:&nbsp;0</code></div><div class="line number33 index32 alt2">&nbsp;</div><div class="line number34 index33 alt1"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;从表变化</code></div><div class="line number35 index34 alt2"><code class="xml plain">mysql&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;<strong>my_student</strong>;</code></div><div class="line number36 index35 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number37 index36 alt2"><code class="xml plain">|&nbsp;stu_id&nbsp;&nbsp;|&nbsp;stu_name&nbsp;|&nbsp;class_id&nbsp;|&nbsp;stu_age&nbsp;|&nbsp;stu_height&nbsp;|&nbsp;gender&nbsp;|</code></div><div class="line number38 index37 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number39 index38 alt2"><code class="xml plain">|&nbsp;stu0001&nbsp;|&nbsp;夏洛&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;185&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number40 index39 alt1"><code class="xml plain">|&nbsp;stu0002&nbsp;|&nbsp;张四&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;165&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number41 index40 alt2"><code class="xml plain">|&nbsp;stu0003&nbsp;|&nbsp;张五&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;187&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number42 index41 alt1"><code class="xml plain">|&nbsp;stu0004&nbsp;|&nbsp;小婷&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;189&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number43 index42 alt2"><code class="xml plain">|&nbsp;stu0005&nbsp;|&nbsp;小猪&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;173&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number44 index43 alt1"><code class="xml plain">|&nbsp;stu0006&nbsp;|&nbsp;小狗&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;170&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number45 index44 alt2"><code class="xml plain">|&nbsp;stu0007&nbsp;|&nbsp;小江&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;178&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number46 index45 alt1"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number47 index46 alt2"><code class="xml plain">7&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.00&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>

        <div id="highlighter_542103" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;删除主表记录</code></div><div class="line number2 index1 alt1"><code class="xml plain">mysql&gt;&nbsp;DELETE&nbsp;FROM&nbsp;my_class&nbsp;WHERE&nbsp;class_id=4;</code></div><div class="line number3 index2 alt2"><code class="xml plain">Query&nbsp;OK,&nbsp;1&nbsp;row&nbsp;affected&nbsp;(0.11&nbsp;sec)</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="xml plain">mysql&gt;&nbsp;--&nbsp;从表变化</code></div><div class="line number6 index5 alt1"><code class="xml plain">mysql&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;my_student;</code></div><div class="line number7 index6 alt2"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number8 index7 alt1"><code class="xml plain">|&nbsp;stu_id&nbsp;&nbsp;|&nbsp;stu_name&nbsp;|&nbsp;class_id&nbsp;|&nbsp;stu_age&nbsp;|&nbsp;stu_height&nbsp;|&nbsp;gender&nbsp;|</code></div><div class="line number9 index8 alt2"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number10 index9 alt1"><code class="xml plain">|&nbsp;stu0001&nbsp;|&nbsp;夏洛&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;185&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number11 index10 alt2"><code class="xml plain">|&nbsp;stu0002&nbsp;|&nbsp;张四&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;28&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;165&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number12 index11 alt1"><code class="xml plain">|&nbsp;stu0003&nbsp;|&nbsp;张五&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;187&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number13 index12 alt2"><code class="xml plain">|&nbsp;stu0004&nbsp;|&nbsp;小婷&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;189&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number14 index13 alt1"><code class="xml plain">|&nbsp;stu0005&nbsp;|&nbsp;小猪&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;173&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number15 index14 alt2"><code class="xml plain">|&nbsp;stu0006&nbsp;|&nbsp;小狗&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;170&nbsp;|&nbsp;男&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number16 index15 alt1"><code class="xml plain">|&nbsp;stu0007&nbsp;|&nbsp;小江&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;178&nbsp;|&nbsp;女&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</code></div><div class="line number17 index16 alt2"><code class="xml plain">+---------+----------+----------+---------+------------+--------+</code></div><div class="line number18 index17 alt1"><code class="xml plain">7&nbsp;rows&nbsp;in&nbsp;set&nbsp;(0.01&nbsp;sec)</code></div></div></td></tr></tbody></table>
        </div>
        <h3>约束作用</h3>
        <p>保证数据的完整性：主表与从表的数据要一致</p>
        <p>因为外键有非常强大的数据约束作用，可能导致数据在后台变化的不可控，使程序在进行设计开发逻辑的时候，没有办法去很好的把握数据（业务），所以外键使用比较少</p>

    </div>
</article>
<footer></footer>
</body>
</html>
