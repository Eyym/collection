<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>规范和封装jdbc程序代码</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside class="k-catelog-list" id="catelog-list"></aside>
<article>
    <header>
        <h1>规范和封装jdbc程序代码</h1>
        <div id="info">
            <div id="time">2018-09-06</div>
            <div id="author">作者：<span><a href="javascript:myAlert();">loubth</a></span></div>
        </div>
    </header>
    <div id="k-catelog" class="content">

        <h3>工具类JdbcUtils</h3>
        <pre style="background-color:#000000;color:#d8d8d8;font-family:'宋体';font-size:12.0pt;"><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.Connection</span>;<br><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.DriverManager</span>;<br><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.ResultSet</span>;<br><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.SQLException</span>;<br><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.Statement</span>;<br><br><span style="color:#60ff60;">public final class </span><span style="color:#2b91af;">JdbcUtils </span>{<br>   <span style="color:#60ff60;">private static </span><span style="color:#2b91af;">String </span>url = <span style="color:#ffa0a0;">"jdbc:mysql://localhost:3306/jdbc"</span>;<br>   <span style="color:#60ff60;">private static </span><span style="color:#2b91af;">String </span>user = <span style="color:#ffa0a0;">"root"</span>;<br>   <span style="color:#60ff60;">private static </span><span style="color:#2b91af;">String </span>password = <span style="color:#ffa0a0;">""</span>;<br><br>   <span style="color:#60ff60;">private </span><span style="color:#bed6ff;">JdbcUtils</span>() {<br>   }<br><br>   <span style="color:#60ff60;">static </span>{<br>      <span style="color:#60ff60;">try </span>{<br>         <span style="color:#2b91af;">Class</span>.<span style="color:#757575;">forName</span>(<span style="color:#ffa0a0;">"com.mysql.jdbc.Driver"</span>);<br>      } <span style="color:#60ff60;">catch </span>(<span style="color:#2b91af;">ClassNotFoundException </span><span style="color:#bfa4a4;">e</span>) {<br>         <span style="color:#60ff60;">throw new </span><span style="color:#ffffff;">ExceptionInInitializerError</span>(<span style="color:#bfa4a4;">e</span>);<br>      }<br>   }<br><br>   <span style="color:#60ff60;">public static </span><span style="color:#2b91af;">Connection </span><span style="color:#ffffff;">getConnection</span>() <span style="color:#60ff60;">throws </span><span style="color:#2b91af;">SQLException </span>{<br>      <span style="color:#60ff60;">return </span><span style="color:#2b91af;">DriverManager</span>.<span style="color:#757575;">getConnection</span>(url, user, password);<br>   }<br><br>   <span style="color:#60ff60;">public static void </span><span style="color:#ffffff;">free</span>(<span style="color:#2b91af;">ResultSet </span><span style="color:#bfa4a4;">rs</span>, <span style="color:#2b91af;">Statement </span><span style="color:#bfa4a4;">st</span>, <span style="color:#2b91af;">Connection </span><span style="color:#bfa4a4;">conn</span>) {<br>      <span style="color:#60ff60;">try </span>{<br>         <span style="color:#60ff60;">if </span>(<span style="color:#bfa4a4;">rs </span>!= <span style="color:#60ff60;">null</span>)<br>            <span style="color:#bfa4a4;">rs</span>.<span style="color:#ffffff;">close</span>();<br>      } <span style="color:#60ff60;">catch </span>(<span style="color:#2b91af;">SQLException </span><span style="color:#bfa4a4;">e</span>) {<br>         <span style="color:#bfa4a4;">e</span>.<span style="color:#ffffff;">printStackTrace</span>();<br>      } <span style="color:#60ff60;">finally </span>{<br>         <span style="color:#60ff60;">try </span>{<br>            <span style="color:#60ff60;">if </span>(<span style="color:#bfa4a4;">st </span>!= <span style="color:#60ff60;">null</span>)<br>               <span style="color:#bfa4a4;">st</span>.<span style="color:#ffffff;">close</span>();<br>         } <span style="color:#60ff60;">catch </span>(<span style="color:#2b91af;">SQLException </span><span style="color:#bfa4a4;">e</span>) {<br>            <span style="color:#bfa4a4;">e</span>.<span style="color:#ffffff;">printStackTrace</span>();<br>         } <span style="color:#60ff60;">finally </span>{<br>            <span style="color:#60ff60;">if </span>(<span style="color:#bfa4a4;">conn </span>!= <span style="color:#60ff60;">null</span>)<br>               <span style="color:#60ff60;">try </span>{<br>                  <span style="color:#bfa4a4;">conn</span>.<span style="color:#ffffff;">close</span>();<br>               } <span style="color:#60ff60;">catch </span>(<span style="color:#2b91af;">SQLException </span><span style="color:#bfa4a4;">e</span>) {<br>                  <span style="color:#bfa4a4;">e</span>.<span style="color:#ffffff;">printStackTrace</span>();<br>               }<br>         }<br>      }<br>   }<br>}</pre>
        <h3>测试工具类Test</h3>
        <pre style="background-color:#000000;color:#d8d8d8;font-family:'宋体';font-size:12.0pt;"><span style="color:#60ff60;">import </span><span style="color:#2b91af;">java.sql.</span>*;<br><br><span style="color:#60ff60;">class </span><span style="color:#2b91af;">Test </span>{<br>    <span style="color:#60ff60;">public static void </span><span style="color:#ffffff;">main</span>(<span style="color:#2b91af;">String</span>[] <span style="color:#bfa4a4;">args</span>) <span style="color:#60ff60;">throws </span><span style="color:#2b91af;">Exception </span>{<br>        <span style="color:#757575;">template</span>();<br>    }<br><br>    <span style="color:#60ff60;">static void </span><span style="color:#ffffff;">template</span>() <span style="color:#60ff60;">throws </span><span style="color:#2b91af;">Exception </span>{<br>        <span style="color:#2b91af;">Connection </span>conn = <span style="color:#60ff60;">null</span>;<br>        <span style="color:#2b91af;">Statement </span>st = <span style="color:#60ff60;">null</span>;<br>        <span style="color:#2b91af;">ResultSet </span>rs = <span style="color:#60ff60;">null</span>;<br>        <span style="color:#60ff60;">try </span>{<br>            <span style="color:#757575;">// 建立连接<br></span><span style="color:#757575;">            </span>conn = <span style="color:#2b91af;">JdbcUtils</span>.<span style="color:#757575;">getConnection</span>();<br>            <span style="color:#757575;">// conn = JdbcUtilsSing.getInstance().getConnection();<br></span><span style="color:#757575;">            // 创建语句<br></span><span style="color:#757575;">            </span>st = conn.<span style="color:#ffffff;">createStatement</span>();<br><br>            <span style="color:#757575;">// 执行语句<br></span><span style="color:#757575;">            </span>rs = st.<span style="color:#ffffff;">executeQuery</span>(<span style="color:#ffa0a0;">"select </span><span style="color:#ff80ff;">*</span><span style="color:#ffa0a0;"> from user"</span>);<br><br>            <span style="color:#757575;">// 处理结果<br></span><span style="color:#757575;">            </span><span style="color:#60ff60;">while </span>(rs.<span style="color:#ffffff;">next</span>()) {<br>                <span style="color:#757575;">// 参数中的1,2,3,4是指sql中的列索引<br></span><span style="color:#757575;">                </span><span style="color:#2b91af;">System</span>.<span style="color:#660e7a;font-weight:bold;font-style:italic;">out</span>.<span style="color:#ffffff;">println</span>(rs.<span style="color:#ffffff;">getObject</span>(<span style="color:#ffa0a0;">1</span>) + <span style="color:#ffa0a0;">"\t" </span>+ rs.<span style="color:#ffffff;">getObject</span>(<span style="color:#ffa0a0;">2</span>)<br>                        + <span style="color:#ffa0a0;">"\t" </span>+ rs.<span style="color:#ffffff;">getObject</span>(<span style="color:#ffa0a0;">3</span>) + <span style="color:#ffa0a0;">"\t" </span>+ rs.<span style="color:#ffffff;">getObject</span>(<span style="color:#ffa0a0;">4</span>));<br>            }<br>        } <span style="color:#60ff60;">finally </span>{<br>            <span style="color:#2b91af;">JdbcUtils</span>.<span style="color:#757575;">free</span>(rs, st, conn);<br>        }<br><br>    }<br>}</pre>




    </div>
</article>
<footer></footer>
</body>
</html>
