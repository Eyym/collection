<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>归并排序</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside class="k-catelog-list" id="catelog-list"></aside>
<article>
    <header>
        <h1>归并排序</h1>
        <div id="info">
            <div id="time">2019-07-01</div>
            <div id="author">作者：<span><a href="javascript:myAlert();">loubth</a></span></div>
        </div>
    </header>
    <div id="k-catelog" class="content doc">
        <h2>介绍</h2>
        <p>归并排序（merge sort）是建立在归并操作上的一种有效的排序算法，该算法是采用分治法（Divide and Conquer）的一个非常典型的应用</p>
        <p><em>分治策略</em>：分治法将问题分(divide)成一些小的问题然后递归求解，而治(conquer)的阶段则将分的阶段得到的各答案"修补"在一起，即分而治之</p>
        <h2>思路</h2>
        <h3>基本思想</h3>
        <p>总的来说，两个步骤</p>
        <ol>
            <li><em>将整个无序序列打散，散到每部分只剩一个元素</em>
                <p>具体怎么打散呢？就是从中间劈成两半。再把这两半分别再劈成两半，这样一直劈下去，直到只剩单个的元素为止</p>
            </li>
            <li><em>把劈开的序列再一点一点有序的拼起来</em>
                <p>具体怎么拼呢？就是从哪劈开的，就从哪拼起来，不过这次要给他们一点一点按顺序排好了再拼。再具体一点说就是，先把劈成单个的元素两两排序拼成一个稍大的块，再把这些稍大的块两两排序成一个更大的块，一直拼，直到拼成一个最大的块就完活了</p>
            </li>
        </ol>
        <p>示意图</p>
        <img src="/collection/image/2019/7/20190703_2.png" alt="">
        <h3>详细步骤</h3>
        <p>首先是“劈开”的注意点，这个劈开是在逻辑上劈开，在这个过程中，整个无序数组并没有受到任何影响，我们只是设置了两个索引指向劈成的小块的头和尾，当所有小块的两个索引都指向同一个位置（因为是单个元素，所以头尾两个索引只能指向这个元素本身了）的时候就说明劈完了</p>
        <p>其次就是“拼上”的注意点，拼这个步骤是真正改变元素位置的操作。我们可以想到，既然要拼，那最少就需要两个元素才有必要拼。为了形象，我们举一个要拼的两边各有4个元素的例子，首先我们设置两个索引i和j，分别指向两部分的头部。然后我们设置一个和原无序数组一样大的数组temp作为缓冲地，相当于一个工作台，把两边索引指向的元素逐个比较大小，把小的元素放入我们的工作台，这样下去我们就能在工作台上得到一个有序的序列，然后我们把这个序列放回原数组就完成了整个排序。你可能注意到了这种操作能排好序的前提是要拼的小块本身就是有序的，要是无序的还能拍好么？不用担心这个问题，因为我们是从最小的单个元素往大拼的，单个元素怎么会无序呢？</p>
        <p>示意图</p>
        <img src="/collection/image/2019/7/20190703_3.png" alt="">
        <p>归并排序动态效果图</p>
        <img src="/collection/image/2019/7/20190703_1.gif" alt="">
        <h2>代码实现</h2>

        <div id="highlighter_164919" class="syntaxhighlighter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">public</code>&nbsp;<code class="java keyword">static</code>&nbsp;<code class="java keyword">void</code>&nbsp;<code class="java plain">mergeSort(</code><code class="java keyword">int</code><code class="java plain">[]&nbsp;arr)&nbsp;{</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">temp[]&nbsp;=&nbsp;</code><code class="java keyword">new</code>&nbsp;<code class="java keyword">int</code><code class="java plain">[arr.length];&nbsp;</code><code class="java comments">//归并排序需要一个额外空间</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mergeSort(arr,&nbsp;</code><code class="java value">0</code><code class="java plain">,&nbsp;arr.length&nbsp;-&nbsp;</code><code class="java value">1</code><code class="java plain">,&nbsp;temp);</code></div><div class="line number4 index3 alt1"><code class="java plain">}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java comments">//分+合方法</code></div><div class="line number8 index7 alt1"><code class="java keyword">private</code>&nbsp;<code class="java keyword">static</code>&nbsp;<code class="java keyword">void</code>&nbsp;<code class="java plain">mergeSort(</code><code class="java keyword">int</code><code class="java plain">[]&nbsp;arr,&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">left,&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">right,&nbsp;</code><code class="java keyword">int</code><code class="java plain">[]&nbsp;temp)&nbsp;{</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code>&nbsp;<code class="java plain">(left&nbsp;&lt;&nbsp;right)&nbsp;{</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">mid&nbsp;=&nbsp;(left&nbsp;+&nbsp;right)&nbsp;/&nbsp;</code><code class="java value">2</code><code class="java plain">;&nbsp;</code><code class="java comments">//中间索引</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//向左递归进行分解</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mergeSort(arr,&nbsp;left,&nbsp;mid,&nbsp;temp);</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//向右递归进行分解</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">mergeSort(arr,&nbsp;mid&nbsp;+&nbsp;</code><code class="java value">1</code><code class="java plain">,&nbsp;right,&nbsp;temp);</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//合并</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">merge(arr,&nbsp;left,&nbsp;mid,&nbsp;right,&nbsp;temp);</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number18 index17 alt1"><code class="java plain">}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="java comments">//合并</code></div><div class="line number22 index21 alt1"><code class="java comments">//这个方法的作用是将两个小的有序数组合并成一个大的有序数组</code></div><div class="line number23 index22 alt2"><code class="java comments">//这两个小的有序数组指的是arr数组的两部分</code></div><div class="line number24 index23 alt1"><code class="java comments">//第一部分：arr[left]~arr[mid]部分</code></div><div class="line number25 index24 alt2"><code class="java comments">//第二部分：arr[mid+1]~arr[right]部分</code></div><div class="line number26 index25 alt1"><code class="java comments">//合并成的大的有序数组指的是arr[left]~arr[right]部分</code></div><div class="line number27 index26 alt2"><code class="java comments">//temp是一个做中转的数组</code></div><div class="line number28 index27 alt1"><code class="java keyword">private</code>&nbsp;<code class="java keyword">static</code>&nbsp;<code class="java keyword">void</code>&nbsp;<code class="java plain">merge(</code><code class="java keyword">int</code><code class="java plain">[]&nbsp;arr,&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">left,&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">mid,&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">right,&nbsp;</code><code class="java keyword">int</code><code class="java plain">[]&nbsp;temp)&nbsp;{</code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">leftIndex&nbsp;=&nbsp;left;&nbsp;</code><code class="java comments">//初始化leftIndex,&nbsp;左边有序序列的初始索引</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">rightIndex&nbsp;=&nbsp;mid&nbsp;+&nbsp;</code><code class="java value">1</code><code class="java plain">;&nbsp;</code><code class="java comments">//初始化rightIndex,&nbsp;右边有序序列的初始索引</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">tempIndex&nbsp;=&nbsp;</code><code class="java value">0</code><code class="java plain">;&nbsp;</code><code class="java comments">//指向temp数组的当前索引</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//(一)</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//先把左右两边(有序)的数据按照规则填充到temp数组</code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//直到左右两边的有序序列有一边处理完毕为止</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code>&nbsp;<code class="java plain">(leftIndex&nbsp;&lt;=&nbsp;mid&nbsp;&amp;&amp;&nbsp;rightIndex&nbsp;&lt;=&nbsp;right)&nbsp;{</code><code class="java comments">//继续</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//如果左边的有序序列的当前元素，小于等于右边有序序列的当前元素</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//即将左边的当前元素，填充到&nbsp;temp数组</code></div><div class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//然后&nbsp;tempIndex++,&nbsp;leftIndex++</code></div><div class="line number41 index40 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">if</code>&nbsp;<code class="java plain">(arr[leftIndex]&nbsp;&lt;=&nbsp;arr[rightIndex])&nbsp;{</code></div><div class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">temp[tempIndex++]&nbsp;=&nbsp;arr[leftIndex++];</code></div><div class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}&nbsp;</code><code class="java keyword">else</code>&nbsp;<code class="java plain">{&nbsp;</code><code class="java comments">//反之,将右边有序序列的当前元素，填充到temp数组</code></div><div class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">temp[tempIndex++]&nbsp;=&nbsp;arr[rightIndex++];</code></div><div class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number47 index46 alt2">&nbsp;</div><div class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//(二)</code></div><div class="line number50 index49 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//把有剩余数据的一边的数据依次全部填充到temp</code></div><div class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code>&nbsp;<code class="java plain">(leftIndex&nbsp;&lt;=&nbsp;mid)&nbsp;{&nbsp;</code><code class="java comments">//左边的有序序列还有剩余的元素，就全部填充到temp</code></div><div class="line number52 index51 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">temp[tempIndex++]&nbsp;=&nbsp;arr[leftIndex++];</code></div><div class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code>&nbsp;<code class="java plain">(rightIndex&nbsp;&lt;=&nbsp;right)&nbsp;{&nbsp;</code><code class="java comments">//右边的有序序列还有剩余的元素，就全部填充到temp</code></div><div class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">temp[tempIndex++]&nbsp;=&nbsp;arr[rightIndex++];</code></div><div class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//(三)</code></div><div class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">//将temp数组的元素拷贝到arr</code></div><div class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">tempIndex&nbsp;=&nbsp;</code><code class="java value">0</code><code class="java plain">;</code></div><div class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code>&nbsp;<code class="java plain">tempLeft&nbsp;=&nbsp;left;&nbsp;</code><code class="java comments">//</code></div><div class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code>&nbsp;<code class="java plain">(tempLeft&nbsp;&lt;=&nbsp;right)&nbsp;{</code></div><div class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">arr[tempLeft++]&nbsp;=&nbsp;temp[tempIndex++];</code></div><div class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number67 index66 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table>
        </div>





    </div>
</article>
<footer></footer>
</body>
</html>
