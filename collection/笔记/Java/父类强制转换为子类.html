<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>父类强制转换为子类</title>
    <link rel="stylesheet" type="text/css" href="/collection/css/common.css">
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="/collection/js/common.js"></script>
</head>
<body>
<aside></aside>
<article>
    <header>
        <h1>父类强制转换为子类</h1>
        <div id="info">
            <div id="time">2018-08-07</div>
            <div id="author">作者：<span><a href="javascript:myAlert();">loubth</a></span></div>
        </div>
    </header>
    <div class="content">

        <h3>java的强制类型转换</h3>

        <p>
            强制类型转换，又叫造型。分为基本数据类型和引用数据类型两种情况，这里探讨后者，即引用类型的强制类型转换。
        </p>

        <p>
            对于引用类型来说，什么是强制类型转换呢？简单地说，就是把父类型转换为子类型。因为子类型比父类型的内涵要丰富，无非就是属性更多功能更强，所以要把父类型转换为子类型，需要强制，所以叫强制类型转换。那么，是不是只要是父类型的变量就可以转换为子类型呢？事实上不是，这里是有条件限制的。
        </p>

        <p>
            首先来看发生在什么情况下。我们用一个类型的构造方法构造出一个对象的时候，对象的类型已经确定了，就是这个类型，但是java允许我们可以不用这个类型的变量引用它，而使用它的父类类型，这时候情况就是我们用一个功能较弱的类型引用了一个功能较强的对象。然而有时候我们又希望这个对象完全发挥它的作用，就需要用一个它本身的类型的变量来引用它，因为原来那个父类的变量是不具备这些功能的，不能使用variablename.function()来使其发挥作用，所以还是用它自己的吧。问题是对象已经在内存中了，已经构造完了，你即使声明一个它本身类型的变量怎么指向它呢？答案是借助原来那个变量，就是它父类型的那个变量，让新的变量和原来的那个指向同一个对象。方式就是两者之间划等号。可是引用类型变量的相等需要两者类型相同，问题是不相同，怎么办？那就是把父类型的变量强制转换成子类型。
        </p>

        <p>
            举个例子来说，比如原来定义了两个类型，FatherClass和SonClass，然后构造了一个SonClass类型的对象，用一个FatherClass类型的变量father引用了，就像这样：
        </p>
        <table border="0" cellpadding="0" cellspacing="0" style="max-width: 100%; border-collapse: collapse; border-spacing: 0px; width: 1000px; font-size: 15px; color: rgb(51, 51, 51); background: none ; border-radius: 0px ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; height: auto ; left: auto ;  margin: 1px 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; min-height: auto ;"><tbody style="border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><tr style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><td class="gutter" style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; color: rgb(56, 86, 111) ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border-width: 0px 3px 0px 0px ; border-top-style: initial ; border-right-style: solid ; border-bottom-style: initial ; border-left-style: initial ; border-top-color: initial ; border-right-color: rgb(67, 90, 95) ; border-bottom-color: initial ; border-left-color: initial ; border-image: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 0.5em 0px 1em ; position: static ; right: auto ; text-align: right ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;">1</div></td><td class="code" style="width: 970px; margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="container" style="width: auto ; margin: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; padding: 0px ; position: relative ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 1em ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;"><code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">FatherClass&nbsp;father&nbsp;=&nbsp;</code><code class="java keyword" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: rgb(170, 170, 255) ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">new</code>&nbsp;<code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">SonClass();</code></div></div></td></tr></tbody></table>
        <p>
            那么，需要将这个对象的类型还原的时候，就可以用这个表达式。
        </p>

        <table border="0" cellpadding="0" cellspacing="0" style="max-width: 100%; border-collapse: collapse; border-spacing: 0px; width: 1000px; font-size: 15px; color: rgb(51, 51, 51); background: none ; border-radius: 0px ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; height: auto ; left: auto ;  margin: 1px 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; min-height: auto ;"><tbody style="border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><tr style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><td class="gutter" style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; color: rgb(56, 86, 111) ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border-width: 0px 3px 0px 0px ; border-top-style: initial ; border-right-style: solid ; border-bottom-style: initial ; border-left-style: initial ; border-top-color: initial ; border-right-color: rgb(67, 90, 95) ; border-bottom-color: initial ; border-left-color: initial ; border-image: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 0.5em 0px 1em ; position: static ; right: auto ; text-align: right ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;">1</div></td><td class="code" style="width: 970px; margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="container" style="width: auto ; margin: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; padding: 0px ; position: relative ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 1em ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;"><code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">SonClass&nbsp;son&nbsp;=&nbsp;(SonClass)father;</code></div></div></td></tr></tbody></table>

        <p>
            其实，father仍然是FatherClass类型，只不过临时把它的能力提升了一下，然后这一切都交给了son这个变量。但是经过这样处理以后，这个对象就真正提升了能力了，在son这个变量的引用之下，从此以后恢复真身，可以自由发挥了。
        </p>
        <p>
            我们刚才说从父类到子类的强制类型转换并不总是能够成功，那什么时候不能成功呢？
        </p>
        <p>
            在于这个的对象的真实类型，也就是它是使用什么类的构造方法构造出来的。如果它本身就是父类的类型，那么强制类型转换是不会成功的。
        </p>
        <p>
            还是举个例子：
        </p>

        <table border="0" cellpadding="0" cellspacing="0" style="max-width: 100%; border-collapse: collapse; border-spacing: 0px; width: 1000px; font-size: 15px; color: rgb(51, 51, 51); background: none ; border-radius: 0px ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 1px 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; min-height: auto ;"><tbody style="border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><tr style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><td class="gutter" style="margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; color: rgb(56, 86, 111) ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border-width: 0px 3px 0px 0px ; border-top-style: initial ; border-right-style: solid ; border-bottom-style: initial ; border-left-style: initial ; border-top-color: initial ; border-right-color: rgb(67, 90, 95) ; border-bottom-color: initial ; border-left-color: initial ; border-image: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 0.5em 0px 1em ; position: static ; right: auto ; text-align: right ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;">1</div><div class="line number2 index1 alt1" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border-width: 0px 3px 0px 0px ; border-top-style: initial ; border-right-style: solid ; border-bottom-style: initial ; border-left-style: initial ; border-top-color: initial ; border-right-color: rgb(67, 90, 95) ; border-bottom-color: initial ; border-left-color: initial ; border-image: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 0.5em 0px 1em ; position: static ; right: auto ; text-align: right ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;">2</div></td><td class="code" style="width: 970px; margin: 0px ; padding: 0px ; border-radius: 0px ; background: none ; border-width: 0px ; border-style: initial ; border-color: initial ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="container" style="width: auto ; margin: 0px ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  outline: 0px ; overflow: visible ; padding: 0px ; position: relative ; right: auto ; top: auto ; vertical-align: baseline ; box-sizing: content-box ; font-size: 1em ; min-height: auto ;"><div class="line number1 index0 alt2" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 1em ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;"><code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">FatherClass&nbsp;f&nbsp;=&nbsp;</code><code class="java keyword" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: rgb(170, 170, 255) ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">new</code>&nbsp;<code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">FatherClass();</code></div><div class="line number2 index1 alt1" style="border-radius: 0px ; background: none rgb(34, 34, 34) ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; padding: 0px 1em ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; font-size: 1em ; min-height: auto ; white-space: pre ;"><code class="java plain" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: lime ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">SonClass&nbsp;s&nbsp;=&nbsp;(SonClass)f;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments" style="padding: 0px ; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace ; font-size: 1em ; color: rgb(66, 139, 221) ; border-radius: 0px ; background: none ; border: 0px ; bottom: auto ; float: none ; height: auto ; left: auto ;  margin: 0px ; outline: 0px ; overflow: visible ; position: static ; right: auto ; top: auto ; vertical-align: baseline ; width: auto ; box-sizing: content-box ; min-height: auto ;">//这时候就会报错，运行时报错，编译能通过的</code></div></div></td></tr></tbody></table>



        <p>
            编译器只检查类型之间有无继承关系，有则通过；运行时检查真正类型，是则通过。
        </p>
    </div>
</article>
<footer></footer>
</body>
</html>
